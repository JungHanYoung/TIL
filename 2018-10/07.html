<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>7일 | Jung&#39;s TIL</title>
    <meta name="description" content="Today I Learn">
    
    
    <link rel="preload" href="/TIL/assets/css/0.styles.22c548d5.css" as="style"><link rel="preload" href="/TIL/assets/js/app.8d80df15.js" as="script"><link rel="preload" href="/TIL/assets/js/4.d102f89a.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.ccb7b06d.js"><link rel="prefetch" href="/TIL/assets/js/11.df535cee.js"><link rel="prefetch" href="/TIL/assets/js/12.bcd134b3.js"><link rel="prefetch" href="/TIL/assets/js/13.5278acca.js"><link rel="prefetch" href="/TIL/assets/js/14.b986e5b6.js"><link rel="prefetch" href="/TIL/assets/js/15.46503adc.js"><link rel="prefetch" href="/TIL/assets/js/16.8f959262.js"><link rel="prefetch" href="/TIL/assets/js/17.4cf6d4c7.js"><link rel="prefetch" href="/TIL/assets/js/18.09825af2.js"><link rel="prefetch" href="/TIL/assets/js/19.56a1c588.js"><link rel="prefetch" href="/TIL/assets/js/2.831e6211.js"><link rel="prefetch" href="/TIL/assets/js/20.8b60de2b.js"><link rel="prefetch" href="/TIL/assets/js/21.1213b57d.js"><link rel="prefetch" href="/TIL/assets/js/22.f5b1f847.js"><link rel="prefetch" href="/TIL/assets/js/23.eb9c43bf.js"><link rel="prefetch" href="/TIL/assets/js/24.d5176db0.js"><link rel="prefetch" href="/TIL/assets/js/25.60fb377b.js"><link rel="prefetch" href="/TIL/assets/js/26.108e2ee6.js"><link rel="prefetch" href="/TIL/assets/js/27.0241a564.js"><link rel="prefetch" href="/TIL/assets/js/28.2c597171.js"><link rel="prefetch" href="/TIL/assets/js/29.34a241d3.js"><link rel="prefetch" href="/TIL/assets/js/3.327b1eb9.js"><link rel="prefetch" href="/TIL/assets/js/5.6afc2547.js"><link rel="prefetch" href="/TIL/assets/js/6.6939c119.js"><link rel="prefetch" href="/TIL/assets/js/7.5867cd1b.js"><link rel="prefetch" href="/TIL/assets/js/8.0665ccf0.js"><link rel="prefetch" href="/TIL/assets/js/9.bb7cb2a8.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.22c548d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Jung's TIL</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/junghanyoung" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://junghanyoung.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/junghanyoung" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://junghanyoung.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>2018-09</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>2018-10</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/TIL/2018-10/01.html" class="sidebar-link">1일</a></li><li><a href="/TIL/2018-10/02.html" class="sidebar-link">2일</a></li><li><a href="/TIL/2018-10/03.html" class="sidebar-link">3일</a></li><li><a href="/TIL/2018-10/04.html" class="sidebar-link">4일</a></li><li><a href="/TIL/2018-10/05.html" class="sidebar-link">5일</a></li><li><a href="/TIL/2018-10/07.html" class="active sidebar-link">7일</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/2018-10/07.html#_2018년-10월-7일" class="sidebar-link">2018년 10월 7일</a></li><li class="sidebar-sub-header"><a href="/TIL/2018-10/07.html#이것이-우분투-리눅스다" class="sidebar-link">이것이 우분투 리눅스다</a></li><li class="sidebar-sub-header"><a href="/TIL/2018-10/07.html#vuepress-관련-지식" class="sidebar-link">Vuepress 관련 지식</a></li></ul></li><li><a href="/TIL/2018-10/08.html" class="sidebar-link">8일</a></li><li><a href="/TIL/2018-10/09.html" class="sidebar-link">9일</a></li><li><a href="/TIL/2018-10/11.html" class="sidebar-link">11일</a></li><li><a href="/TIL/2018-10/16.html" class="sidebar-link">16일</a></li><li><a href="/TIL/2018-10/17.html" class="sidebar-link">17일</a></li><li><a href="/TIL/2018-10/18.html" class="sidebar-link">18일</a></li><li><a href="/TIL/2018-10/28.html" class="sidebar-link">28일</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2018-12</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2019-02</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>2021-11</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><p></p><div class="table-of-contents"><ul><li><a href="#_2018년-10월-7일">2018년 10월 7일</a></li><li><a href="#이것이-우분투-리눅스다">이것이 우분투 리눅스다</a><ul><li><a href="#_7장-1-2교시-쉘스크립트">7장 1~2교시 : 쉘스크립트</a></li><li><a href="#_8장-1교시-원격접속서버-개념-텔넷-서버-구축">8장 1교시 : 원격접속서버 개념, 텔넷 서버 구축</a><ul><li><a href="#텔넷서버">텔넷서버</a></li><li><a href="#실습">실습</a></li></ul></li><li><a href="#_8장-2교시-ssh서버-구축-vnc서버-구축-vnc-실습안함">8장 2교시 : SSH서버 구축, VNC서버 구축(VNC 실습안함)</a><ul><li><a href="#openssh">OpenSSH</a></li><li><a href="#실습">실습</a></li><li><a href="#vnc서버">VNC서버</a></li></ul></li><li><a href="#_9장-1교시-네임서버-개념과-작동">9장 1교시 : 네임서버 개념과 작동</a><ul><li><a href="#개요">개요</a></li><li><a href="#ip주소를-얻는-내부-로컬-흐름도">IP주소를 얻는 내부(로컬) 흐름도</a></li></ul></li><li><a href="#_9장-2교시-캐싱-전용-네임서버-구축">9장 2교시 : 캐싱 전용 네임서버 구축</a><ul><li><a href="#실습">실습</a></li></ul></li><li><a href="#_9장-3교시-마스터-네임-서버">9장 3교시 : 마스터 네임 서버</a><ul><li><a href="#실습">실습</a></li></ul></li></ul></li><li><a href="#vuepress-관련-지식">Vuepress 관련 지식</a></li></ul></div><p></p> <h2 id="_2018년-10월-7일"><a href="#_2018년-10월-7일" aria-hidden="true" class="header-anchor">#</a> 2018년 10월 7일</h2> <p>어제가 제대한지 3년~ 어렴풋이 계속 기억하는거 오마이갓</p> <p>내년 예비군만하면 끝</p> <h2 id="이것이-우분투-리눅스다"><a href="#이것이-우분투-리눅스다" aria-hidden="true" class="header-anchor">#</a> 이것이 우분투 리눅스다</h2> <h3 id="_7장-1-2교시-쉘스크립트"><a href="#_7장-1-2교시-쉘스크립트" aria-hidden="true" class="header-anchor">#</a> 7장 1~2교시 : 쉘스크립트</h3> <ul><li>C언어와 유사하게 프로그래밍 가능</li> <li>변수, 반복문, 제어문</li> <li>별도 컴파일X, 텍스트 파일 형태로 바로 실행</li> <li>실행방법
<ul><li>&quot;sh &lt;스크립트 파일&gt;&quot;로 실행</li> <li>&quot;chmod +x &lt;스크립트 파일&gt;&quot;명령으로 실행가능 속성으로 변경 후, &quot;./&lt;스크립트 파일&gt;&quot;명령으로 실행</li></ul></li></ul> <h5 id="변수"><a href="#변수" aria-hidden="true" class="header-anchor">#</a> 변수</h5> <ul><li>다른점
<ul><li>모든 변수를 문자열 취급
<ul><li>연산을 하려면 역따옴표와 expr사용</li> <li>num3=`expr 100 + 200`</li></ul></li> <li>변수 대입시 &quot;=&quot; 양쪽에 공백이 없어야함.</li> <li>&quot;$변수이름&quot;으로 값을 불러옴</li> <li>파라미터 변수
<ul><li>$0, $1 ... 의 형태
<ul><li>ex) rm -rf file
<ul><li>$0=rm</li> <li>$1=-rf</li> <li>$2=file</li> <li>$*=rm -rf file</li></ul></li></ul></li></ul></li></ul></li></ul> <h5 id="조건문"><a href="#조건문" aria-hidden="true" class="header-anchor">#</a> 조건문</h5> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> 조건 <span class="token punctuation">]</span>     // 단어마다 공백이 있어야한다.
<span class="token keyword">then</span>
    참일 경우 실행
<span class="token keyword">else</span>
    거짓일 경우 실행
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>파일과 관련된 조건</p> <table><thead><tr><th style="text-align:center">파일 조건</th> <th style="text-align:left">결과</th></tr></thead> <tbody><tr><td style="text-align:center">-d 파일이름</td> <td style="text-align:left">파일이 디렉터리면 참</td></tr> <tr><td style="text-align:center">-e 파일이름</td> <td style="text-align:left">파일이 존재하면 참</td></tr> <tr><td style="text-align:center">-f 파일이름</td> <td style="text-align:left">파일이 일반파일이면 참</td></tr> <tr><td style="text-align:center">-g 파일이름</td> <td style="text-align:left">파일에 set-group-id가 설정되면 참</td></tr> <tr><td style="text-align:center">-r 파일이름</td> <td style="text-align:left">파일이 읽기가능이면 참</td></tr> <tr><td style="text-align:center">-s 파일이름</td> <td style="text-align:left">파일 크기가 0이 아니면 참</td></tr> <tr><td style="text-align:center">-u 파일이름</td> <td style="text-align:left">파일에 set-user-id가 설정되면 참</td></tr> <tr><td style="text-align:center">-w 파일이름</td> <td style="text-align:left">파일이 쓰기가능이면 참</td></tr> <tr><td style="text-align:center">-x 파일이름</td> <td style="text-align:left">파일이 실행가능이면 참</td></tr></tbody></table> <h3 id="_8장-1교시-원격접속서버-개념-텔넷-서버-구축"><a href="#_8장-1교시-원격접속서버-개념-텔넷-서버-구축" aria-hidden="true" class="header-anchor">#</a> 8장 1교시 : 원격접속서버 개념, 텔넷 서버 구축</h3> <h4 id="텔넷서버"><a href="#텔넷서버" aria-hidden="true" class="header-anchor">#</a> 텔넷서버</h4> <ul><li>전통적으로 사용되어온 원격접속</li> <li>보안에 취약</li> <li>접속할 PC에는 텔넷 클라이언트 프로그램으로 접속</li></ul> <h4 id="실습"><a href="#실습" aria-hidden="true" class="header-anchor">#</a> 실습</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Server</span>
<span class="token comment"># xinetd, telnetd 설치</span>
<span class="token function">apt-get</span>  -y  <span class="token function">install</span>  xinetd  telnetd
<span class="token comment"># xinetd에 telnet 서비스 설정파일 추가</span>
<span class="token function">cd</span> /etc/xinetd.d/
<span class="token function">ls</span> -l   -<span class="token operator">&gt;</span> telnet파일 확인
<span class="token punctuation">..</span>. 없어
<span class="token function">touch</span> telnet    -<span class="token operator">&gt;</span> 파일 생성
<span class="token function">vi</span> telnet       -<span class="token operator">&gt;</span> 파일 수정
<span class="token function">service</span> telnet
<span class="token punctuation">{</span>
    disalbe <span class="token operator">=</span> no
    flags <span class="token operator">=</span> REUSE
    socket_type <span class="token operator">=</span> stream
    <span class="token function">wait</span> <span class="token operator">=</span> no
    user <span class="token operator">=</span> root
    server <span class="token operator">=</span> /usr/sbin/in.telnetd
    log_on_failure +<span class="token operator">=</span> USERID
<span class="token punctuation">}</span>
:wq
<span class="token comment"># 텔넷 접속용 유저생성</span>
adduser teluser      
<span class="token punctuation">..</span>. 비밀번호 생성 <span class="token punctuation">..</span>.
<span class="token comment"># 텔넷 서버 시작, 재부팅시에도</span>
systemctl restart xinetd    -<span class="token operator">&gt;</span> 텔넷서버 시작
systemctl <span class="token function">enable</span> xinetd     -<span class="token operator">&gt;</span> 재부팅시에도 시작
<span class="token comment"># 방화벽에서 텔넷포트(23)허용</span>
ufw  allow  23/tcp          

<span class="token comment"># 텔넷 접속</span>
<span class="token function">ifconfig</span> ens32
<span class="token punctuation">..</span>.
telnet  192.168.111.100
<span class="token punctuation">..</span>. 접속성공<span class="token operator">!</span>

<span class="token comment"># telnet에서 root계정 접속 불가</span>
<span class="token comment"># - telnet은 보안이 약해 root계정이 막혀있다.</span>
<span class="token comment"># - ** 혀용하려면 /etc/securetty 삭제 (권장하지않음)</span>
<span class="token function">mv</span> /etc/securetty /etc/securetty.bak
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="_8장-2교시-ssh서버-구축-vnc서버-구축-vnc-실습안함"><a href="#_8장-2교시-ssh서버-구축-vnc서버-구축-vnc-실습안함" aria-hidden="true" class="header-anchor">#</a> 8장 2교시 : SSH서버 구축, VNC서버 구축(VNC 실습안함)</h3> <h4 id="openssh"><a href="#openssh" aria-hidden="true" class="header-anchor">#</a> OpenSSH</h4> <ul><li>텔넷과 용도는 동일</li> <li>보안 강화</li> <li>데이터를 전송할 때 암호화를 한다는 점이 다름</li></ul> <h4 id="실습-2"><a href="#실습-2" aria-hidden="true" class="header-anchor">#</a> 실습</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># Server</span>
<span class="token function">apt-get</span>  -y  <span class="token function">install</span>  openssh-server
systemctl  restart  <span class="token function">ssh</span>
systemctl  <span class="token function">enable</span>  <span class="token function">ssh</span>

<span class="token comment"># Client(Linux)</span>
<span class="token comment"># ssh  사용자명@서버IP</span>
<span class="token function">ssh</span>  teluser@192.168.111.100
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="vnc서버"><a href="#vnc서버" aria-hidden="true" class="header-anchor">#</a> VNC서버</h4> <ul><li>X윈도우로 접속(그래픽 인터페이스)</li> <li>속도가 매우 느림</li></ul> <h3 id="_9장-1교시-네임서버-개념과-작동"><a href="#_9장-1교시-네임서버-개념과-작동" aria-hidden="true" class="header-anchor">#</a> 9장 1교시 : 네임서버 개념과 작동</h3> <ul><li>네임서버 = DNS 서버</li> <li>도메인 이름을 IP주소로 변환시켜주는 역할 = 이름 해석
<ul><li>www.nate.com -&gt; 120.50.131.112</li></ul></li></ul> <h4 id="개요"><a href="#개요" aria-hidden="true" class="header-anchor">#</a> 개요</h4> <ul><li><p>인터넷이 처음으로 쓰일때는 몇대의 컴퓨터밖에 없어 IP주소 자체를 통해 접속</p></li> <li><p>컴퓨터가 점점 늘어나며 IP주소로써 기억하기 어려워져 특정파일(hosts)에 URL과 IP주소를 기록함(전화번호부와 유사한 형태)</p> <ul><li>Windows : C:\Windows\system32\drivers\etc\hosts</li> <li>Linux : /etc/hosts</li></ul></li></ul> <blockquote><p>102.54.94.57 rhino.acme.com</p> <p>38.26.63.10 x.acme.com</p></blockquote> <ul><li>네트워크 상의 컴퓨터가 기하급수적으로 늘어나고 변동이 심해 모든 IP정보를 파일 하나(/etc/hosts)에 기록하는 것은 무리</li> <li>이름 해석(Name Resolution)을 전문적으로 해주는 서버 컴퓨터의 필요성(=DNS서버 =네임서버)</li></ul> <h4 id="ip주소를-얻는-내부-로컬-흐름도"><a href="#ip주소를-얻는-내부-로컬-흐름도" aria-hidden="true" class="header-anchor">#</a> IP주소를 얻는 내부(로컬) 흐름도</h4> <p><img src="/TIL/assets/img/get_ip_flow.5a05281d.png" alt></p> <ul><li>/etc/host.conf -&gt; DNS서비스를 어디서 받는지 정의</li> <li>/etc/hosts     -&gt; 도메인 이름과 IP주소 매핑테이블</li> <li>/etc/resolv.conf -&gt; 사용될 DNS서버의 IP주소 정의</li></ul> <h3 id="_9장-2교시-캐싱-전용-네임서버-구축"><a href="#_9장-2교시-캐싱-전용-네임서버-구축" aria-hidden="true" class="header-anchor">#</a> 9장 2교시 : 캐싱 전용 네임서버 구축</h3> <h5 id="도메인-이름-체계"><a href="#도메인-이름-체계" aria-hidden="true" class="header-anchor">#</a> 도메인 이름 체계</h5> <p>초창기 인터넷은 1대의 네임서버만으로 관리가능했지만 폭발적인 확장으로 몇대의 컴퓨터로도 관리할 수 없게 되었다. 트리 구조와 같은 도메인 이름 체계를 고안한다.</p> <p><img src="/TIL/assets/img/9_2_1.5edfa34e.png" alt></p> <h5 id="로컬-네임서버-작동-순서"><a href="#로컬-네임서버-작동-순서" aria-hidden="true" class="header-anchor">#</a> 로컬 네임서버 작동 순서</h5> <p><img src="/TIL/assets/img/9_2_2.a931c49a.png" alt></p> <h5 id="캐싱전용-네임서버"><a href="#캐싱전용-네임서버" aria-hidden="true" class="header-anchor">#</a> 캐싱전용 네임서버</h5> <ul><li>자기가 관리하는 도메인은 없고 다른 도메인서버를 통해 알아다가 제공한다.</li></ul> <h4 id="실습-3"><a href="#실습-3" aria-hidden="true" class="header-anchor">#</a> 실습</h4> <ul><li>기존 DNS서버에서 Server를 캐싱 전용 네임서버로 바꾼다.</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 관련 패키지 설치</span>
<span class="token function">apt-get</span>  -y  <span class="token function">install</span>  bind9  bind9utils
<span class="token comment"># 관련 설정파일 수정</span>
<span class="token function">vi</span>  /etc/bind/named.conf.options
<span class="token punctuation">..</span>.
    recursion <span class="token function">yes</span><span class="token punctuation">;</span>
    allow-query  <span class="token punctuation">{</span>  any<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">..</span>.
:wq
<span class="token comment"># 서버 구동</span>
systemctl restart bind9
systemctl <span class="token function">enable</span> bind9
<span class="token comment"># 방화벽 포트 허용</span>
ufw  allow  53      // -<span class="token operator">&gt;</span> tcp/udp 열어줘야
<span class="token comment"># 테스트</span>
<span class="token function">dig</span> 192.168.111.100 www.nate.com

<span class="token comment"># Server(B), Client에 Server를 네임서버로 지정</span>
<span class="token function">vi</span>  /etc/resolv.conf
<span class="token punctuation">..</span>.
nameserver 192.168.111.100
:wq
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_9장-3교시-마스터-네임-서버"><a href="#_9장-3교시-마스터-네임-서버" aria-hidden="true" class="header-anchor">#</a> 9장 3교시 : 마스터 네임 서버</h3> <ul><li>도메인에 속해있는 컴퓨터들의 이름을 관리하고, 외부에 해당 컴퓨터의 IP주소를 알려주는 역할</li></ul> <h4 id="실습-4"><a href="#실습-4" aria-hidden="true" class="header-anchor">#</a> 실습</h4> <ul><li>john.com의 마스터네임서버 설치 및 운영</li></ul> <p><img src="/TIL/assets/img/9_3_1.b190d615.png" alt></p> <ul><li>Server : 네임 서버 &amp; 웹서버</li> <li>Server(B) : FTP 서버</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 웹서버 및 FTP서버 간단 구동</span>
<span class="token comment">## 웹서버 - Server</span>
<span class="token function">apt-get</span>  -y  <span class="token function">install</span>  apache2
systemctl  restart  apache2
systemctl  <span class="token function">enable</span>  apache2
ufw  allow  80      -<span class="token operator">&gt;</span>  웹서버는 80번 포트
<span class="token function">cd</span>  /var/www/html
<span class="token function">rm</span>  index.html
<span class="token function">vi</span>  index.html
<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Ubuntu Web Server<span class="token operator">&lt;</span>/h1<span class="token operator">&gt;</span>
:wq
<span class="token comment">## FTP서버 - Server(B)</span>
<span class="token function">apt-get</span>  -y  <span class="token function">install</span>  vsftpd
<span class="token function">cd</span>  /srv/ftp
<span class="token function">vi</span> welcome.msg              -<span class="token operator">&gt;</span> 클라이언트 ftp연결시 메세지출력
Welcome Ubuntu Server
:wq
<span class="token function">vi</span>  /etc/vsftpd.conf
anonymous_enable<span class="token operator">=</span>YES
banner_file<span class="token operator">=</span>/srv/ftp/welcome.msg
:wq
systemctl restart vsftpd

<span class="token comment">################## 마스터 네임서버 구축 ******************</span>
<span class="token comment"># 도메인에 대한 설정파일 포워딩</span>
<span class="token function">vi</span> /etc/bind/named.conf
<span class="token punctuation">..</span>.
zone  <span class="token string">&quot;john.com&quot;</span>  IN  <span class="token punctuation">{</span>
    <span class="token function">type</span>  master<span class="token punctuation">;</span>
    <span class="token function">file</span>  <span class="token string">&quot;/etc/bind/john.com.db&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
:wq
<span class="token comment"># 오류 체크</span>
named-checkconf
<span class="token comment"># 도메인에 대한 설정파일 추가</span>
<span class="token function">cd</span>  /etc/bind
<span class="token function">vi</span> john.com.db
<span class="token variable">$TTL</span>    3H
@       IN  SOA @   root    <span class="token punctuation">(</span>2 1D 1H 1W 1H<span class="token punctuation">)</span>

@       IN  NS  @   
        IN  A   192.168.111.100     

www     IN  A   192.168.111.100     <span class="token comment"># 웹서버</span>
<span class="token function">ftp</span>     IN  A   192.168.111.200     <span class="token comment"># ftp서버</span>
:wq
<span class="token comment"># 오류 체크 </span>
named-checkzone  john.com  john.com.db
systemctl  restart  bind9

<span class="token comment"># Client(Linux)에서 접속 확인</span>
<span class="token function">cat</span>  /etc/resolv.conf       <span class="token comment"># 네임서버 설정확인</span>
<span class="token punctuation">..</span>.
<span class="token comment"># 웹서버 접속 확인</span>
Firefox -<span class="token operator">&gt;</span> john.com -<span class="token operator">&gt;</span> www.john.com 접속 성공<span class="token operator">!</span>
<span class="token comment"># FTP서버 접속 확인</span>
<span class="token function">ftp</span> ftp.john.com
<span class="token punctuation">..</span>.
220-<span class="token comment">##################</span>
220-Welcome Ubuntu Server
220-<span class="token comment">##################</span>
<span class="token punctuation">..</span>.
ftp<span class="token operator">&gt;</span>                -<span class="token operator">&gt;</span> <span class="token function">ftp</span> 접속 성공<span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h2 id="vuepress-관련-지식"><a href="#vuepress-관련-지식" aria-hidden="true" class="header-anchor">#</a> Vuepress 관련 지식</h2> <ul><li>~~~sh라고 붙인 코드들에 highlight가 되자 않음</li> <li>찾다가 highlight.js를 config.js에 붙이는 예제를 vuepress documentation에서 봄</li> <li>chainMarkdown속성에 highlight.js를 붙여도 안댐..ㅠ</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js  # 적용이 안되는 코드</span>
<span class="token keyword">var</span> hljs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'highlight.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token operator">...</span>
	<span class="token function">chainMarkdown</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		config<span class="token punctuation">.</span>options<span class="token punctuation">.</span><span class="token function-variable function">highlight</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> lang<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>lang <span class="token operator">&amp;&amp;</span> hljs<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span>lang<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> hljs<span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span>lang<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// use external default escaping</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// element에 class라도 바뀌어야되는데 잘못된건가?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>근데 다른 언어는 highlight가 되는데 왜 sh은 안되는 거지? 라는 생각이 듬.</li> <li>더 찾아보니 vuepress는 highlight하는 라이브러리로 <a href="https://prismjs.com/#languages-list" target="_blank" rel="noopener noreferrer">prismjs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>를 쓰는 것을 알아냄. (<a href="https://github.com/vuejs/vuepress/blob/58261c1ae3d101c2e512202b3b1edfacc10a645d/lib/markdown/highlight.js" target="_blank" rel="noopener noreferrer">참고<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)</li> <li>prismjs에서 Supported languages 확인했는데 sh은 없고 bash가 있음.</li> <li>sh -&gt; bash로 바꾸니 됨. 삽질 헿</li> <li>md파일에서 highlight가 잘 안될때 <a href="https://prismjs.com/#languages-list" target="_blank" rel="noopener noreferrer">prismjs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 참고</li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/TIL/2018-10/05.html" class="prev">
          5일
        </a></span> <span class="next"><a href="/TIL/2018-10/08.html">
          8일
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/TIL/assets/js/app.8d80df15.js" defer></script><script src="/TIL/assets/js/4.d102f89a.js" defer></script>
  </body>
</html>
